"use strict";(self.webpackChunkapigear=self.webpackChunkapigear||[]).push([[3195],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),m=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=m(n),d=r,h=c["".concat(s,".").concat(d)]||c[d]||u[d]||o;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var m=2;m<o;m++)l[m]=n[m];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2891:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>m});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:1},l="Introduction",i={unversionedId:"advanced/maker/intro",id:"advanced/maker/intro",title:"Introduction",description:"ApiGear offers a large set of pre-made technology templates covering the major programming languages and technologies.",source:"@site/docs/advanced/maker/intro.md",sourceDirName:"advanced/maker",slug:"/advanced/maker/intro",permalink:"/docs/advanced/maker/intro",draft:!1,editUrl:"https://github.com/apigear-io/apigear-docs/edit/main/docs/advanced/maker/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"Write SDK Templates",permalink:"/docs/category/write-sdk-templates"},next:{title:"Quick Start",permalink:"/docs/advanced/maker/tutorial"}},s={},m=[{value:"Maker",id:"maker",level:2},{value:"Creating a template",id:"creating-a-template",level:2},{value:"Your first template",id:"your-first-template",level:2}],p={toc:m};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"ApiGear offers a large set of pre-made technology templates covering the major programming languages and technologies.\nBut often a project requires some adaptations to the templates or require support for a different technology which is not yet covered."),(0,r.kt)("p",null,"ApiGear was designed to allow customers easily to adapt the existing templates for the specifics of each customer project."),(0,r.kt)("p",null,"Customers can provide their own technology templates, either as open source or proprietary templates."),(0,r.kt)("p",null,"The process to adapt an existing template or to create a fresh new template is not really difficult and will be covered here."),(0,r.kt)("h2",{id:"maker"},"Maker"),(0,r.kt)("p",null,"A user which creates templates is called a maker. Normally is is possible to contribute to existing templates to enhance in an open discussion the quality for everyone. But often there is also a desire to solve a new problem or to create a project specific adaptation. In these cases it makes sense to fork a template or to create a new template."),(0,r.kt)("p",null,"templates allows you to solve all kind of API structured problems in a very easy way."),(0,r.kt)("h2",{id:"creating-a-template"},"Creating a template"),(0,r.kt)("p",null,"A template is a folder with a common structure consisting of a rules document, which controls the code generation process and the templates folder. The templates will be listed inside a rules document. Later a solution document will link the template with API modules for code generation."),(0,r.kt)("p",null,"Below is roughly the process to create and develop a template"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a template folder with rules document and templates folder"),(0,r.kt)("li",{parentName:"ul"},"Create an ApiGear Studio API project with a demo API"),(0,r.kt)("li",{parentName:"ul"},"Add a solution to the API project to link API modules with the template"),(0,r.kt)("li",{parentName:"ul"},"Edit the template and re-generate the output")),(0,r.kt)("p",null,"The templates are written using the ",(0,r.kt)("a",{parentName:"p",href:"https://pkg.go.dev/text/template"},"go-template")," template language and each template should end with ",(0,r.kt)("inlineCode",{parentName:"p"},".tpl"),". ApiGear extends the template language by custom programming language specific filters to ease many complex tasks. "),(0,r.kt)("p",null,"The Go-Template is used in several projects and is well documented. The ApiGear extensions are documented in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/advanced/maker/filters"},"Filters")," section."),(0,r.kt)("h2",{id:"your-first-template"},"Your first template"),(0,r.kt)("p",null,"A typical template folder structure looks like this"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"first/\n    rules.yaml\n    templates/welcome.txt.tpl\n")),(0,r.kt)("p",null,"The rules document is a YAML document and lists all template file and how they shall be written inside the output folder. A simple rules document could look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"features:\n  - name: default\n    scopes:\n      - match: system\n        documents:\n          - source: welcome.txt.tpl\n            target: welcome.txt\n")),(0,r.kt)("p",null,"The first level (here ",(0,r.kt)("inlineCode",{parentName:"p"},"default"),") defines a feature. This can be enabled or disabled using the feature settings for the code generator.\nThe next level (here ",(0,r.kt)("inlineCode",{parentName:"p"},"system"),") defines to which symbol is shall be applied. A symbol is a defined location inside the API description."),(0,r.kt)("p",null,"Inside an API there exists the following symbols:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"system"),": will be applied once for the root level system"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"module"),": will be applied for each module in the system"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"interface"),": will be is applied for each interface inside the module"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"struct"),": will be is applied for each struct inside the module"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enum"),": will be is applied for each enum inside the module")),(0,r.kt)("p",null,"For each of these symbols inside the API description the target documents are written based on the source template."),(0,r.kt)("p",null,"You could think of the underlying logic of a rules document like this (using a python pseudo-code):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},"system = ...\nwrite_system_documents()\nfor module in system.modules:\n    write_module_documents()\n    for interface in module.interfaces:\n        write_interface_documents()\n    for struct in module.structs:\n        write_struct_documents()\n    for enum in module.enums:\n        write_enum_documents()\n")),(0,r.kt)("p",null,"Here is a more elaborate example of a rules document:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"# rules.yaml\nfeatures:\n  - name: default\n    scopes:\n      - match: system\n        documents:\n          - source: system.md.tpl\n            target: system.md\n      - match: module\n        documents:\n          - source: module.md.tpl\n            target: {{.Module.Name}}.md\n      - match: interface:\n        documents:\n          - source: interface.md.tpl\n            target: {{.Interface.Name}}.md\n      - match: struct\n        documents:\n          - source: struct.md.tpl\n            target: {{.Struct.Name}}.md\n      - match: enum\n        documents:\n          - source: enum.md.tpl\n            target: {{.Enum.Name}}.md\n  - name: summary\n    scopes:\n      - match: system\n        documents:\n          - source: summary.md.tpl\n            target: summary.md\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("code",{"v-pre":!0},"{{ }}")," are a template expression. For example ",(0,r.kt)("code",{"v-pre":!0},"{{.Module.Name}}")," will be replaced with the content of module name. This allows you to write exactly these document names you require."),(0,r.kt)("p",null,"Additional to the template tags, the template engine also support filters. A filter is a function which takes a object and return a string. For example ",(0,r.kt)("code",{"v-pre":!0},"{{ lower .Module.Name }}")," or ",(0,r.kt)("code",{"v-pre":!0},"{{ .Module.Name | lower }}")," will lower case the module name. There are more filters in the in our filters documentation."))}c.isMDXComponent=!0}}]);